<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title>Vasputil</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5951 2009-05-18 18:03:10Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left{
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="vasputil">
<h1 class="title">Vasputil</h1>

<p>Vasputil is a set of command-line utilities and Python libraries
designed to make life with VASP easier. The command-line utilities
(Python scripts), can be used directly or as examples of what can be
done with the provided python modules.  These are</p>
<dl class="docutils">
<dt><tt class="docutils literal">vasputil_atomsdistance</tt></dt>
<dd>Measure distance between two atoms, can also measure projected
distances.</dd>
<dt><tt class="docutils literal">vasputil_atomsmoved</tt></dt>
<dd>See which atoms have moved between two POSCAR files.  If lattices are
compatible, takes into account periodic boundary conditions.  Optionally
print out moved distances and the distance vector.</dd>
<dt><tt class="docutils literal">vasputil_chgarith</tt></dt>
<dd>Simple arithmetic on charge density in CHG/CHGCAR format
files. Supports +,-,*,/ for the elemental arithmetic operations
and 'avg' for calculating the average.</dd>
<dt><tt class="docutils literal">vasputil_chgplaneplot</tt></dt>
<dd>Plot charge density in a plane (generated e.g. by lev00) as a
pseudocolor, contour (colour or BW), or filled contour
plot. Output is either to a window on the screen or to a file.</dd>
<dt><tt class="docutils literal">vasputil_direct2cartesian</tt></dt>
<dd>Convert a POSCAR file from direct to cartesian coordinates.</dd>
<dt><tt class="docutils literal">vasputil_dosplot</tt></dt>
<dd>Plot density-of-states. Can plot total, total integrated, and
site-projected DOS. For site-projected DOS, different orbitals can
be plotted.</dd>
<dt><tt class="docutils literal">vasputil_interpolate</tt></dt>
<dd>Interpolate coordinates between two POSCAR files, either one intermediate
image where one can specify where in the interval the new coordinates will
be, or create many evenly spaced images.</dd>
<dt><tt class="docutils literal">vasputil_nearestneighbors</tt></dt>
<dd>Print out nearest neighbor table, based on minimum distance or number of
nearest neighbors.</dd>
<dt><tt class="docutils literal">vasputil_plane2atom</tt></dt>
<dd>Calculate the distance between an atom and a plane defined by three atoms.</dd>
<dt><tt class="docutils literal">vasputil_poscar2xyz</tt></dt>
<dd>Convert a POSCAR format file to XYZ format.</dd>
<dt><tt class="docutils literal">vasputil_zlayers</tt></dt>
<dd>Find layers in the z direction and print interlayer distances.</dd>
</dl>
<p>Documentation for these utilities is provided via the <tt class="docutils literal"><span class="pre">-h</span></tt> command
line option.</p>
<div class="section" id="web-page">
<h1>Web Page</h1>
<dl class="docutils">
<dt><a class="reference external" href="http://github.com/jabl/vasputil">http://github.com/jabl/vasputil</a></dt>
<dd>Main home page; download, source tree, issue tracker, etc.</dd>
<dt><a class="reference external" href="http://tfy.tkk.fi/~job/vasputil">http://tfy.tkk.fi/~job/vasputil</a></dt>
<dd>Older releases, and a copy of the README page.</dd>
</dl>
</div>
<div class="section" id="requirements">
<h1>Requirements</h1>
<p>For full functionality, vasputil requires the following python libraries:</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://wiki.fysik.dtu.dk/ase">ASE</a> (Atomic Simulation
Environment) version 3.4 or newer. For older ASE releases, vasputil
5.3 is compatible with ASE 3.3.1, vasputil 5.2 is compatible with
ASE 3.2, vasputil 5.1 with ASE 3.1, and vasputil 5.0 with ASE 3.0.</li>
<li><a class="reference external" href="http://numpy.scipy.org">NumPy</a></li>
<li><a class="reference external" href="http://matplotlib.sf.net">matplotlib</a></li>
<li><a class="reference external" href="http://www.scipy.org">SciPy</a></li>
</ol>
<p>Finally, to regenerate the README.html file, the <a class="reference external" href="http://docutils.sourceforge.net/docs/user/tools.html">rst2html</a> utility is
needed.</p>
<p>Without all the libraries, a subset of the functionality is
available. The matplotlib library is needed only by the
vasputil_chgplaneplot, vasputil_dosplot and vasputil_zlayers
utilities. The SciPy library is needed only by vasputil_chgplaneplot,
and only in case the figure shape is not square. The remaining
utilities require only ASE and NumPy.</p>
<p>Except for ASE, the other three libraries (and their dependencies)
should already be installed on your system. If not, at least on Linux
they should be available from the default package repositories, and
installation should be a breeze.  If you don't have access to a
package management system (e.g. on Linux) which includes matplotlib
and its dependencies, you can get all at once by installing one of the
python distributions targeted at science, such as SAGE, Enthought
Python Distribution, or Python(x,y). Another solution if you already
have python installed, is to install matplotlib and other libraries
via <em>easy_install</em> from setuptools (a sort of package management
system for python packages).</p>
</div>
<div class="section" id="installation-instructions">
<h1>Installation Instructions</h1>
<ol class="arabic">
<li><p class="first">Unpack the program distribution and go to the directory.</p>
<p><tt class="docutils literal">tar xvzf <span class="pre">vasputil-$(VERSION).tar.gz</span></tt></p>
<p><tt class="docutils literal">cd <span class="pre">vasputil-$(VERSION)</span></tt></p>
</li>
<li><p class="first">Install the program into your home directory</p>
<p><tt class="docutils literal">python setup.py install <span class="pre">--home=~</span></tt></p>
<p>This will install the scripts into ~/bin and the python modules
into ~/lib/python/vasputil. You should make sure that the
directory of the python modules is found on the python search
path. E.g. if you installed it like the above, you should have</p>
<p><tt class="docutils literal">export <span class="pre">PYTHONPATH=$HOME/lib/python</span></tt></p>
<p>in your shell initialization script (~/.bash_profile or
equivalent). For installation into some other directory, see
<tt class="docutils literal">python setup.py <span class="pre">--help</span></tt> and the documentation for <a class="reference external" href="http://docs.python.org/library/distutils.html">distutils</a> .</p>
<p>For SUSE Linux users: There is apparently something weird with the
python installation in SUSE, and the <tt class="docutils literal"><span class="pre">--home</span></tt> option does not
work properly. Instead install vasputil with</p>
<p><tt class="docutils literal">python setup.py install <span class="pre">--prefix=~</span></tt></p>
<p>In this case the library modules will instead be installed in
~/lib{64}/python{X.Y}/site-packages/vasputil.</p>
</li>
<li><p class="first">Optionally, run the testsuite to make sure it works.</p>
<p><tt class="docutils literal">python runtests.py</tt></p>
</li>
</ol>
</div>
<div class="section" id="interactive-usage">
<h1>Interactive Usage</h1>
<p>The python modules are designed to be used from the interactive python
prompt as well, to provide a sort of MATLAB-like interactive
environment where you can manipulate coordinates stored in arrays, or
plot data etc. For this, the <a class="reference external" href="http://ipython.scipy.org">IPython</a>
enhanced interactive environment is recommended. Start with the
matplotlib stuff preloaded with <tt class="docutils literal">ipython <span class="pre">-pylab</span></tt>.  For those
familiar with MATLAB, see <a class="reference external" href="http://www.scipy.org/NumPy_for_Matlab_Users">NumPy for MATLAB Users</a> . After that, just
import what you need from the vasputil module and get going! See the
python scripts for reference, or <tt class="docutils literal">pydoc vasputil</tt>, <tt class="docutils literal">pydoc
vasputil.supercell</tt> etc. to read documentation, or the <tt class="docutils literal">?</tt> operator
in IPython.</p>
<p>With IPython you can also run the scripts in the interactive
environment with the <tt class="docutils literal">%run</tt> command, and this will import the
variables in the script into the ipython environment. This is useful
if you want to do something similar, but not quite what the
command-line interface allows.</p>
</div>
<div class="section" id="manual">
<h1>Manual</h1>
<p>This section describes how to accomplish specific tasks. It does not
document every feature of vasputil, as most of the tasks are hopefully
simple enough that the usage should be self-evident from the help
instruction given by the <tt class="docutils literal"><span class="pre">-h</span></tt> option to the command-line utilities.</p>
<div class="section" id="plotting-charge-density-in-a-plane">
<h2>Plotting charge density in a plane</h2>
<p>Use the <tt class="docutils literal">vasputil_chgarith</tt> tool to create a suitable input charge
density file (e.g. the charge density difference when some species
adsorbs on a surface), and then use the <a class="reference external" href="http://www.cmmp.ucl.ac.uk/~lev/codes/lev00/">lev00</a> utility to create the
charge density data in a plane. The data is written to a file (default
name out.dat_1) that can be read with the <tt class="docutils literal">vasputil_chgplaneplot</tt>
utility which can then plot this data.</p>
</div>
<div class="section" id="generating-supercells">
<h2>Generating supercells</h2>
<p>vasputil 5.x does not contain the supercell generator previously found
in vasputil 4.x. To create supercells, the ASE supercell generator is
recommended. This contains functionality to create surface supercells
as well. In order to generate a supercell for VASP, first create the
supercell following the <a class="reference external" href="https://wiki.fysik.dtu.dk/ase/ase/lattice.html">ASE lattice</a> instructions. This
is probably easiest done interactively using IPython. Assuming you
have imported ase as <tt class="docutils literal">from ase import *</tt> and your supercell is
referenced via the variable <tt class="docutils literal">atoms</tt>, you can visualize your results
with <tt class="docutils literal">view(atoms)</tt>. Finally, write out the supercell to the file
<tt class="docutils literal">POSCAR.out</tt> with <tt class="docutils literal"><span class="pre">write('POSCAR.out',</span> atoms, <span class="pre">format='vasp')</span></tt>.</p>
<p>Another option is the <a class="reference external" href="http://www.cmmp.ucl.ac.uk/~lev/codes/lev00/">tetr</a> utility, which also
contains a supercell generator.</p>
</div>
<div class="section" id="plotting-projected-density-of-states">
<h2>Plotting projected Density-of-States</h2>
<p>The <tt class="docutils literal">vasputil_dosplot</tt> contains a simple command-line utility for
plotting a single orbital. While this is nice for quickly looking at
the DOS, for publication plots you probably want to look at that
utility and create custom versions of it in order to create the
specific plots you want, with multiple subplots and multiple graphs
per plot.</p>
</div>
</div>
</div>
</body>
</html>
